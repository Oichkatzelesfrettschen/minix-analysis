\\documentclass[tikz,border=5pt]{standalone}
\\usepackage{tikz}
\\usepackage{times}
\\usetikzlibrary{shapes,arrows,positioning}

\\definecolor{sendercolor}{RGB}{52,152,219}\n\\definecolor{receivercolor}{RGB}{46,204,113}\n\\definecolor{kernelcolor}{RGB}{230,126,34} % Colors

\\begin{document}
\\begin{tikzpicture}[
    proc/.style={rectangle, minimum width=2cm, minimum height=1cm, draw=black},
    arrow/.style={->, thick},
    label/.style={font=\\small}
]

% Title and Processes
\\node[font=\\large\\bfseries] at (5,-0.5) {MINIX IPC Message Flow};\n\\node[proc, fill=sendercolor] (sender) at (1,0) {Sender\Ring 3};\n\\node[proc, fill=kernelcolor] (kernel) at (5,0) {Kernel\Ring 0};\n\\node[proc, fill=receivercolor] (receiver) at (9,0) {Receiver\Ring 3};\n\\node[font=\\tiny\\bfseries] at (5,-2) {IPC Timing};\n\\draw[thick] (0.5,-2.5) -- (9.5,-2.5);

% Message flow
\\draw[arrow] (sender) -- node[label, above] {1. INT 0x30\SEND} (kernel);\n\\draw[arrow] (kernel) -- node[label, above] {2. Copy msg\Validate} (receiver);

% Return path
\\draw[arrow, dashed] (receiver) -- node[label, below] {3. RECEIVE\Process} (kernel);\n\\draw[arrow, dashed] (kernel) -- node[label, below] {4. Return ctrl} (sender);

% State annotations
\\node[label, below] at (Sender.south) {Message ready};\n\\node[label, below] at (Kernel.south) {Routing};\n\\node[label, below] at (Receiver.south) {Blocked wait};

% Timeline labels
\\node[label] at 1,-2.8 {SEND};\n\\node[label] at 5,-2.8 {COPY};\n\\node[label] at 9,-2.8 {RECV};

\\end{tikzpicture}
\\end{document}
