| Feature Category | Feature Name | Description & Key Instructions/Registers | MINIX 3.4.0 Status | Notes |
| :--- | :--- | :--- | :--- | :--- |
| Interrupts | APIC (Advanced Programmable Interrupt Controller) | Hardware component managing interrupts in multiprocessor systems. Enables efficient interrupt routing and prioritization. Kernel configures and uses APIC for hardware interrupts and Inter-Processor Interrupts (IPIs). | Fully Implemented | MINIX 3.4.0 has comprehensive support for APIC and IOAPIC. It uses them for interrupt handling, SMP, timer functionality, and system initialization. It also parses ACPI tables (MADT) to discover APIC configurations, including references to x2APIC types. The code includes mechanisms for enabling/disabling APIC, sending IPIs, and managing APIC timers. |
| Memory Management | PAE (Physical Address Extension) | Allows 32-bit x86 processors to access more than 4 GB of physical memory by extending the physical address space to 36 bits. Introduced with Pentium Pro (P6). Kernel manages additional page table entries. Prerequisite for NX bit on 32-bit systems. | Fully Implemented | MINIX 3.4.0 has full support for PAE. This includes conditional compilation (`#ifdef PAE`, `MKPAE`), runtime CPU feature detection (`_cpufeature(_CPUF_I386_PAE)`), and explicit handling of PAE-specific memory management structures (e.g., 64-bit PTEs, 3-level page tables). The `CR4.PAE` bit is set to enable the feature. |
| Memory Management | NX bit (No-Execute bit) / XD bit (Execute Disable bit) | Marks memory pages as non-executable, preventing code execution from data regions. Security measure against buffer overflow attacks. Kernel controls NX bit in page table entries to enforce Data Execution Prevention (DEP). | Partially Implemented | The `PG_NX` bit is defined in `pte.h` for 64-bit page table entries, indicating awareness and capability. The `EFER` MSR, which contains the `NXE` bit, is manipulated in `protect.c` (for `SYSCALL/SYSRET` enablement). While explicit `EFER.NXE` setting and `CPUID` `XD` bit checks were not directly found in the provided search results, the necessary infrastructure is present. It is highly probable that NX is enabled, especially when PAE is active, as PAE is a prerequisite for NX on 32-bit systems. |
| Syscalls | SYSENTER/SYSEXIT & SYSCALL/SYSRET | Fast system call instructions for efficient user-mode to kernel-mode transitions. SYSENTER/SYSEXIT for 32-bit Intel, SYSCALL/SYSRET for 64-bit AMD and later Intel. Kernel configures MSRs for entry points. | Fully Implemented | MINIX 3.4.0 has comprehensive support for both `SYSENTER/SYSEXIT` (Intel) and `SYSCALL/SYSRET` (AMD and later Intel). It dynamically detects CPU support via `_cpufeature`, configures necessary MSRs (`INTEL_MSR_SYSENTER_CS/ESP/EIP`, `AMD_MSR_EFER`, `AMD_MSR_STAR`), and provides distinct assembly entry/exit points (`mpx.S`) and C-level handling (`arch_do_syscall`, `restore_user_context_sysenter/syscall`). User-mapped IPC vectors also leverage these instructions. |
| Virtualization | VT-x (Intel Virtualization Technology) / AMD-V | Hardware extensions for efficient virtualization, allowing multiple OSes concurrently. Kernel (as hypervisor) uses these instructions to manage VMs, including VM entry/exit, I/O, and memory virtualization (EPT). | Not Found | No direct evidence of hardware virtualization support (VT-x/AMD-V) was found. Keywords like `VMXON`, `VMLAUNCH`, `VMREAD`, `VMWRITE`, `VMCS`, `EPT`, `VT-x`, `AMD-V`, or `SVM` were not present in relevant architectural files. Files related to "VM Control" (`do_vmctl.c`, `arch_do_vmctl.c`) appear to handle MINIX's internal memory management or process virtualization, not direct interaction with CPU hardware virtualization features. |
| Security | SGX (Software Guard Extensions) | Instructions to create secure, encrypted memory regions (enclaves), protecting code/data from OS/hypervisor. Kernel manages Enclave Page Cache (EPC) and facilitates enclave creation/management. | Not Found | No evidence of Intel SGX (Software Guard Extensions) or AMD SEV (Secure Encrypted Virtualization) was found. Keywords like `SGX`, `ENCLAVE`, `EINIT`, `EADD`, `EEXTEND`, `ECREATE`, `EREMOVE`, `EGETKEY`, `EREPORT`, `EACCEPT`, `EMODPE`, `EMODPR`, or `EMODT` were not present in the architectural files. The "SGX" found in ARM-specific files (`omap_intr_registers.h`) refers to a graphics module (SGX530) on ARM-based OMAP processors, which is unrelated to Intel's security extensions. |
| SIMD | SSE (Streaming SIMD Extensions) | Accelerates parallel computations. Kernel manages SSE register state during context switches. | Fully Implemented | While the kernel itself is compiled with `-mno-sse` (disabling direct SSE instruction use within the kernel), MINIX 3.4.0 correctly detects SSE support via `_cpufeature(_CPUF_I386_SSE)`. It enables `CR4_OSXMMEXCPT` and manages the SSE state (XMM registers) for user-space processes using `FXSAVE` and `FXRSTOR` during context switches. It also provides `ptrace` interfaces (`PT_GETXMMREGS`, `PT_SETXMMREGS`) for debugging SSE-enabled applications and includes a `simd_exception` handler. |
| SIMD | AVX (Advanced Vector Extensions) | More advanced SIMD instruction set. Kernel manages AVX register state during context switches. | Not Found | The kernel is explicitly compiled with `-mno-avx`, indicating that AVX instructions are not used by the kernel. There is no evidence of the kernel saving/restoring AVX register state (YMM registers) using `XSAVE/XRSTOR` or manipulating `XCR0` for AVX features. |
| Misc | MSRs (Model Specific Registers) | Special CPU registers for configuring processor features, performance monitoring, debugging, and power management. Kernel uses RDMSR/WRMSR to control CPU behaviors. | Fully Implemented | MINIX 3.4.0 has comprehensive support for MSRs. It includes native assembly routines (`rdmsr`, `wrmsr`) for reading and writing MSRs. These are used extensively for crucial architectural configurations such as enabling/disabling the Local APIC (`IA32_APIC_BASE`), configuring fast system call entry points (`SYSENTER`/`SYSCALL` via `INTEL_MSR_SYSENTER_CS/ESP/EIP`, `AMD_MSR_EFER`, `AMD_MSR_STAR`), and setting up performance monitoring/watchdog features (`INTEL_MSR_PERFMON_CRT0/SEL0`, `AMD_MSR_EVENT_SEL0/CTR0`) on both Intel and AMD platforms. |
| Misc | CPUID (CPU Identification) | Instruction to query CPU for vendor, model, family, and supported features. Kernel uses CPUID during boot for configuration and feature enablement. | Fully Implemented | MINIX 3.4.0 has comprehensive support for the CPUID instruction. It uses assembly routines (`cpuid` instruction in `klib.S`) and provides a C-level interface (`_cpuid`) to query CPU information. This is used to identify CPU vendor (Intel/AMD), detect various CPU features (e.g., FXSAVE/FXRSTOR, SSE, TSC, PAE, SYSCALL/SYSENTER), and manage CPU-specific data in an SMP environment during kernel initialization and runtime. |
| Misc | RDRAND (Read Random) | Instruction returning high-quality random numbers from on-chip hardware random number generator (HRNG). Kernel can use as an entropy source. | Not Found | No evidence of RDRAND or RDSEED instruction usage was found in the relevant architectural files. This suggests MINIX 3.4.0 does not currently leverage the CPU's hardware random number generator. |